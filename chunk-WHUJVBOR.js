import{a as q}from"./chunk-NBVE2JBG.js";import{a as y,b as k}from"./chunk-7OWVXPDB.js";import{i as I,j as V}from"./chunk-QGXMSAUK.js";import"./chunk-NZ5PK7L2.js";import{Ab as D,Bb as l,Ca as b,Cb as r,Da as g,Db as w,Hb as _,Kb as m,Mb as c,Nc as E,Vb as p,Vc as B,Xa as o,Xb as M,Ya as h,ac as N,ad as G,bc as T,dc as C,nb as u,pb as s,ta as x,wb as f,yb as R,yc as P,zb as S}from"./chunk-TLLNOJ6K.js";var v=t=>({"ti-btn-primary":t});function A(t,d){if(t&1&&w(0,"app-dynamic-form",7)(1,"app-data-grid",8),t&2){let e=c();s("formConfig",e.searchConfig)("formName","Search")("columnCount",3),o(),s("tableDataSet",e.rechargeDetails)("tableConfig",e.tableConfig)("tableWidth",100)("formName","Mobile Recharges Details")}}function F(t,d){if(t&1){let e=_();l(0,"a",6),m("click",function(){let a=b(e).$implicit,n=c(3);return g(n.selectPlanType(a))}),p(1),r()}if(t&2){let e=d.$implicit,i=c(3);s("ngClass",C(2,v,i.selectedPlan===e)),o(),M(" ",e," ")}}function U(t,d){if(t&1){let e=_();l(0,"app-data-grid",14),m("buttonAction",function(a){b(e);let n=c(3);return g(n.doRecharge(a))}),r()}if(t&2){let e=c(3);s("tableDataSet",e.plans)("tableConfig",e.mobileRechargeConfig)("tableWidth",100)("formName","Mobile Recharges Plans")}}function j(t,d){t&1&&(l(0,"div",15)(1,"h3"),p(2,"No plans found."),r()())}function W(t,d){if(t&1&&(l(0,"div",10)(1,"div",1)(2,"div",11)(3,"div",3)(4,"div")(5,"h6",12),p(6,"Plans"),r()(),l(7,"div",4)(8,"nav",5),S(9,F,2,4,"a",13,R),r()()()()(),u(11,U,1,4,"app-data-grid",8)(12,j,3,0),r()),t&2){let e=c(2);o(9),D(e.planTypes),o(2),f(11,e.plans.length>0?11:12)}}function O(t,d){if(t&1){let e=_();l(0,"app-dynamic-form",9),m("action",function(a){b(e);let n=c();return g(n.getRechargeDetails(a.form))}),r(),u(1,W,13,1,"div",10)}if(t&2){let e=c();s("formConfig",e.formConfig)("formName","Mobile Recharge")("columnCount",3),o(),f(1,e.planTypes.length>0?1:-1)}}var ee=(()=>{class t{constructor(e,i,a,n){this.apiService=e,this.utilityService=i,this.cdr=a,this.messageNotificationService=n,this.rechargeDetails=[{mobilenumber:"9876543210",rechargeDate:"2024-07-26",circle:"Maharashtra",price:199,description:"1 GB data per day, unlimited calls",validity:28},{mobilenumber:"8765432109",rechargeDate:"2024-07-25",circle:"Delhi",price:399,description:"2 GB data per day, unlimited calls, 100 SMS",validity:56},{mobilenumber:"7654321098",rechargeDate:"2024-07-24",circle:"Karnataka",price:599,description:"3 GB data per day, unlimited calls, 100 SMS, Disney+ Hotstar subscription",validity:84},{mobilenumber:"6543210987",rechargeDate:"2024-07-23",circle:"Tamil Nadu",price:149,description:"Unlimited calls, 1 GB data, 100 SMS",validity:28},{mobilenumber:"5432109876",rechargeDate:"2024-07-22",circle:"Kerala",price:799,description:"2 GB data per day, unlimited calls, 100 SMS, Amazon Prime subscription",validity:84},{mobilenumber:"4321098765",rechargeDate:"2024-07-21",circle:"West Bengal",price:249,description:"1.5 GB data per day, unlimited calls, 100 SMS",validity:56},{mobilenumber:"3210987654",rechargeDate:"2024-07-20",circle:"Uttar Pradesh",price:449,description:"2 GB data per day, unlimited calls, 100 SMS",validity:84},{mobilenumber:"2109876543",rechargeDate:"2024-07-19",circle:"Gujarat",price:199,description:"1 GB data per day, unlimited calls",validity:28},{mobilenumber:"1098765432",rechargeDate:"2024-07-18",circle:"Rajasthan",price:349,description:"1.5 GB data per day, unlimited calls, 100 SMS",validity:56},{mobilenumber:"0987654321",rechargeDate:"2024-07-17",circle:"Punjab",price:699,description:"3 GB data per day, unlimited calls, 100 SMS, Netflix subscription",validity:84},{mobilenumber:"9988776655",rechargeDate:"2024-07-16",circle:"Andhra Pradesh",price:179,description:"Unlimited calls, 1 GB data, 100 SMS",validity:28},{mobilenumber:"8899776655",rechargeDate:"2024-07-15",circle:"Telangana",price:299,description:"1.5 GB data per day, unlimited calls, 100 SMS",validity:56}],this.tableConfig={tableHeading:"Service Details",columns:[{name:"Mobile Number",field:"mobilenumber",width:"120"},{name:"Recharge Date",field:"rechargeDate",type:"dateTime",width:"120"},{name:"Validity",field:"validity",width:"120"},{name:"Description",field:"description",width:"350"},{name:"Price",field:"price",width:"120"}],config:{sorting:{column:"price",order:"desc"},pageSizeOptions:[5,10],pageSize:7},isRowClickable:!1,isSearchable:!0},this.mobileRechargeConfig={tableHeading:"Recharge Details",columns:[{name:"Validity",field:"validity",width:"120"},{name:"Description",field:"desc",width:"350"},{name:"Price",field:"rs",width:"120"}],handlers:[{text:"Do Recharge",title:"Do Recharge",type:"button"}],config:{sorting:{column:"price",order:"desc"},pageSizeOptions:[5,10],pageSize:7},isRowClickable:!1,isSearchable:!0},this.formConfig={fields:[{type:"text",label:"Mobile Number",placeholder:"Enter Mobile Number",class:"form-control",id:"number",validators:[{isRequired:!0,message:"Mobile Number is required"}]},{type:"dropdownWithID",id:"operatorId",label:"Operator List",options:[],class:"form-control",validators:[{isRequired:!0,message:"Operator is required"}]}]},this.searchConfig={fields:[{type:"text",label:"Mobile Number",placeholder:"Enter Mobile Number",class:"form-control",id:"number",validators:[{isRequired:!1}]},{type:"dropdownWithID",id:"operator",label:"Operator List",options:[],class:"form-control",validators:[{isRequired:!1}]},{type:"dropdown",id:"circle",label:"Circle List",options:[{value:"Delhi NCR",label:"Delhi NCR"},{value:"UP West",label:"UP West"},{value:"UP North",label:"UP North"}],class:"form-control",validators:[{isRequired:!1}]},{type:"text",id:"rechargeAmount",label:"Recharge Amount",placeholder:"Enter Recharge Amount",class:"form-control",validators:[{isRequired:!1}]}]},this.planTypes=[],this.selectedPlan="",this.selectedTab="Mobile Recharge",this.plans=[]}ngOnInit(){this.utilityService.operatorList$.subscribe(()=>{let e=this.utilityService.filterByCategory("Prepaid");this.formConfig.fields[1].options=e,this.searchConfig.fields[1].options=e})}getRechargeDetails(e){e.type="Mobile",this.apiService.checkCircleDetails(e).subscribe({next:i=>{i.message==="Fetch Successful"&&(e.circle=i.info.circle,e.op=i.info.operator,this.browsePlan(e))},error:i=>{console.error("Error fetching data:",i)}})}browsePlan(e){this.apiService.browsePlan(e).subscribe({next:i=>{this.allPlans=i.info,this.planTypes=Object.keys(this.allPlans),this.selectedPlan=this.planTypes[1],this.plans=this.allPlans[this.selectedPlan],this.selectionDetailsRecharge=e,this.selectedTab="Mobile Recharge"},error:i=>{console.error("Error fetching data:",i)}})}selectPlanType(e){this.plans=[],this.selectedPlan=e,setTimeout(()=>{this.plans=this.allPlans[e]||[],this.mobileRechargeConfig.columns.length=this.mobileRechargeConfig.columns.length-1,this.cdr.detectChanges()},0)}generateUniqueReferenceID(){let e=Math.floor(Math.random()*1e6);return new Date().getTime()+e}doRecharge(e){this.selectionDetailsRecharge.amount=e.rs,this.selectionDetailsRecharge.canumber=this.selectionDetailsRecharge.number,this.selectionDetailsRecharge.referenceid=this.generateUniqueReferenceID().toString(),this.apiService.doRecharge(this.selectionDetailsRecharge).subscribe({next:i=>{i.status?this.messageNotificationService.success(i.message,"success",5e3):this.messageNotificationService.error(i.message,"error",5e3)},error:i=>{console.error("Error fetching data:",i)}})}static{this.\u0275fac=function(i){return new(i||t)(h(y),h(k),h(P),h(q))}}static{this.\u0275cmp=x({type:t,selectors:[["app-new-mobile-recharge"]],standalone:!0,features:[N([y]),T],decls:12,vars:7,consts:[[1,"grid","grid-cols-12","gap-6"],[1,"xl:col-span-12","col-span-12"],[1,"box","box-body","!p-0"],[1,"md:flex","px-4","py-6","items-center","justify-between"],[1,"mt-2","md:mt-0"],[1,"-mb-0.5","sm:flex","sm:space-x-6","rtl:space-x-reverse","flex-wrap"],[1,"w-full","flex","sm:w-auto","hs-tab-active:font-semibold","hs-tab-active:text-primary","hs-tab-active:bg-primary/10","rounded-md","py-2","px-3","text-sm","cursor-pointer",3,"click","ngClass"],[3,"formConfig","formName","columnCount"],[3,"tableDataSet","tableConfig","tableWidth","formName"],[3,"action","formConfig","formName","columnCount"],[1,"box"],[1,"box-body","!p-0"],[1,"font-semibold","mb-0","text-[1rem]"],[1,"w-full","flex","sm:w-auto","hs-tab-active:font-semibold","hs-tab-active:text-primary","hs-tab-active:bg-primary/10","rounded-md","py-2","px-3","text-sm","cursor-pointer",3,"ngClass"],[3,"buttonAction","tableDataSet","tableConfig","tableWidth","formName"],[1,"text-center"]],template:function(i,a){i&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"nav",5)(6,"a",6),m("click",function(){return a.selectedTab="Recharge Details"}),p(7," Recharge Details "),r(),l(8,"a",6),m("click",function(){return a.selectedTab="Mobile Recharge"}),p(9," Mobile Recharge "),r()()()()(),u(10,A,2,7)(11,O,2,4),r()()),i&2&&(o(6),s("ngClass",C(3,v,a.selectedTab==="Recharge Details")),o(2),s("ngClass",C(5,v,a.selectedTab==="Mobile Recharge")),o(2),f(10,a.selectedTab==="Recharge Details"?10:11))},dependencies:[I,V,B,E,G]})}}return t})();export{ee as NewMobileRechargeComponent};
