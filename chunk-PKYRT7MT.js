import{a as B,b}from"./chunk-45NM53QG.js";import"./chunk-C4RI5G74.js";import"./chunk-IIP7EG5Z.js";import{a as T}from"./chunk-XBHNIBT2.js";import{c as w,i as k}from"./chunk-ILMIHTBU.js";import{H as A}from"./chunk-GBPNPEQC.js";import"./chunk-FTXHXGZA.js";import"./chunk-CARY4E7O.js";import{a as N}from"./chunk-J4G2L2VD.js";import{Ab as r,Bb as l,Ca as d,Da as c,Gb as _,Jb as s,Lb as o,Mc as x,Ub as f,Uc as I,Xa as u,Ya as S,a as h,ac as D,cc as g,nb as C,pb as m,ta as G,vb as y}from"./chunk-PA4BRCDR.js";var v=a=>({"ti-btn-primary":a});function P(a,p){if(a&1){let e=_();r(0,"app-dynamic-form",7),s("action",function(i){d(e);let n=o();return c(n.applyActionOn(i,1))}),l(),r(1,"app-data-grid",8),s("action",function(i){d(e);let n=o();return c(n.applyActionOn(i))}),l()}if(a&2){let e=o();m("formConfig",e.searchFormConfig)("formName","Search")("columnCount",3),u(),m("tableDataSet",e.userDetails)("tableConfig",e.tableConfig)("tableWidth",100)("formName","Digital Gold/Selver Details")}}function F(a,p){if(a&1){let e=_();r(0,"app-show-details",9),s("action",function(){return d(e),c("")}),l(),r(1,"app-show-details",10),s("selection",function(i){d(e);let n=o(3);return c(n.selectedBillingAddress=i)}),l(),r(2,"app-show-details",10),s("selection",function(i){d(e);let n=o(3);return c(n.selectedDeliveryAddress=i)}),l()}if(a&2){let e=o(3);m("formValue",e.uniqueData)("formName","Customer Details")("displayFields",e.CustomerInfoFormConfig),u(),m("formValue",e.uniqueData.billing_address)("formName","Billing Details")("displayFields",e.BillingInfoFormConfig),u(),m("formValue",e.uniqueData.delivery_address)("formName","Delivery Details")("displayFields",e.deliveryInfoFormConfig)}}function E(a,p){if(a&1){let e=_();r(0,"button",11),s("click",function(){d(e);let i=o(3);return c(i.getDigitalGoldSilverCustomerActivation())}),f(1,"Activate"),l(),r(2,"button",12),s("click",function(){d(e);let i=o(3);return c(i.getDigitalGoldSilverCustomerDeactivation())}),f(3,"De-Activavte"),l(),r(4,"app-show-details",9),s("action",function(){return d(e),c("")}),l()}if(a&2){let e=o(3);u(4),m("formValue",e.customerDetails)("formName","Balance Details")("displayFields",e.formConfig)}}function q(a,p){if(a&1){let e=_();r(0,"app-dynamic-form",7),s("action",function(i){d(e);let n=o(3);return c(n.applyActionOn(i,3))}),l()}if(a&2){let e=o(3);m("formConfig",e.buyGoldFormConfig)("formName","Get Qutotations For Sell Gold/Silver")("columnCount",3)}}function R(a,p){if(a&1){let e=_();r(0,"app-dynamic-form",7),s("action",function(i){d(e);let n=o(3);return c(n.applyActionOn(i,4))}),l()}if(a&2){let e=o(3);m("formConfig",e.buyGoldFormConfig)("formName","Get Qutotations For Buy Gold/Silver")("columnCount",3)}}function L(a,p){if(a&1){let e=_();r(0,"div",2)(1,"div",3)(2,"div",4)(3,"nav",5)(4,"a",6),s("click",function(){d(e);let i=o(2);return c(i.selectedInternalTab="Customer Info")}),f(5," Customer Info "),l(),r(6,"a",6),s("click",function(){d(e);let i=o(2);return i.selectedInternalTab="Balance Info",c(i.getDigitalGoldSilverCustomerBalanceGet())}),f(7," Customer Balance Info "),l(),r(8,"a",6),s("click",function(){d(e);let i=o(2);return c(i.selectedInternalTab="Buy Gold/Silver")}),f(9," Buy Gold/Silver "),l(),r(10,"a",6),s("click",function(){d(e);let i=o(2);return c(i.selectedInternalTab="Sell Gold/Silver")}),f(11," sell Gold/Silver "),l()()()()(),C(12,F,3,9)(13,E,5,3)(14,q,1,3)(15,R,1,3)}if(a&2){let e=o(2);u(4),m("ngClass",g(5,v,e.selectedInternalTab==="Customer Info")),u(2),m("ngClass",g(7,v,e.selectedInternalTab==="Balance Info")),u(2),m("ngClass",g(9,v,e.selectedInternalTab==="Buy Gold/Silver")),u(2),m("ngClass",g(11,v,e.selectedInternalTab==="Sell Gold/Silver")),u(2),y(12,e.selectedInternalTab==="Customer Info"?12:e.selectedInternalTab==="Balance Info"?13:e.selectedInternalTab==="Sell Gold/Silver"?14:e.selectedInternalTab==="Buy Gold/Silver"?15:-1)}}function Q(a,p){if(a&1){let e=_();r(0,"app-dynamic-form",7),s("action",function(i){d(e);let n=o();return c(n.applyActionOn(i,5))}),l(),C(1,L,16,13)}if(a&2){let e=o();m("formConfig",e.profileFormConfig)("formName","Search")("columnCount",3),u(),y(1,e.uniqueData?1:-1)}}var J=(()=>{class a{applyActionOn(e,t){if(t){let i=JSON.parse(sessionStorage.getItem("userDetails"));e.form.userId=i.userId?i.userId:1,e.form.tenantId=i.tenantId,e.form.refid=this.generateUniqueReferenceID().toString()}switch(t){case 1:break;case 2:break;case 3:this.getSellGoldSilverSellQuotation(e.form);break;case 4:this.getBuyGoldSilverGetQuotation(e.form);break;case 5:this.getDigitalGoldSilverCustomerGetprofile(e.form);break;default:this.dialog.open(b,{data:{form:this.getStatusFormConfig,columns:4,formName:"Get Transaction Status"}}).afterClosed().subscribe(n=>{this.getBuyGoldSilverTransactionStatus(n)});break}}constructor(e,t,i){this.apiService=e,this.dialog=t,this.messageNotificationService=i,this.userDetails=[{canumber:554984552,mode:"online",address1:"Flat No. 101, Sunrise Apartments",address2:"Sector 12, Noida",address3:"Uttar Pradesh, India",referenceid:2021052415,insuranceNumber:"LICI2122000037468013",billAmount:"1548.00",billnetamount:"1548.00",billdate:"25-05-2021 00:44:29",acceptPayment:!0,acceptPartPay:!1,cellNumber:"905514651",dueFrom:"11/05/2021",dueTo:"11/05/2021",validationId:"HGA8V00A110382264047",billId:"HGA8V00A110382264047B"},{canumber:554984553,mode:"offline",address1:"House No. 25, Green Park Colony",address2:"Sector 5, Gurgaon",address3:"Haryana, India",referenceid:2021052416,insuranceNumber:"LICI2122000037468014",billAmount:"1750.00",billnetamount:"1750.00",billdate:"26-05-2021 01:15:00",acceptPayment:!0,acceptPartPay:!0,cellNumber:"905514652",dueFrom:"12/05/2021",dueTo:"12/05/2021",validationId:"HGA8V00A110382264048",billId:"HGA8V00A110382264048B"},{canumber:554984554,mode:"online",address1:"Building No. 8, Prestige Residency",address2:"MG Road, Bangalore",address3:"Karnataka, India",referenceid:2021052417,insuranceNumber:"LICI2122000037468015",billAmount:"2000.00",billnetamount:"2000.00",billdate:"27-05-2021 02:20:15",acceptPayment:!0,acceptPartPay:!1,cellNumber:"905514653",dueFrom:"13/05/2021",dueTo:"13/05/2021",validationId:"HGA8V00A110382264049",billId:"HGA8V00A110382264049B"},{canumber:554984555,mode:"offline",address1:"Plot No. 45, Dream Villas",address2:"Kothrud, Pune",address3:"Maharashtra, India",referenceid:2021052418,insuranceNumber:"LICI2122000037468016",billAmount:"2500.00",billnetamount:"2500.00",billdate:"28-05-2021 03:30:45",acceptPayment:!1,acceptPartPay:!1,cellNumber:"905514654",dueFrom:"14/05/2021",dueTo:"14/05/2021",validationId:"HGA8V00A110382264050",billId:"HGA8V00A110382264050B"},{canumber:554984556,mode:"online",address1:"House No. 12, Royal Enclave",address2:"Anna Nagar, Chennai",address3:"Tamil Nadu, India",referenceid:2021052419,insuranceNumber:"LICI2122000037468017",billAmount:"1800.00",billnetamount:"1800.00",billdate:"29-05-2021 04:10:30",acceptPayment:!0,acceptPartPay:!0,cellNumber:"905514655",dueFrom:"15/05/2021",dueTo:"15/05/2021",validationId:"HGA8V00A110382264051",billId:"HGA8V00A110382264051B"},{canumber:554984557,mode:"offline",address1:"Flat No. 88, Palm Meadows",address2:"Banjara Hills, Hyderabad",address3:"Telangana, India",referenceid:2021052420,insuranceNumber:"LICI2122000037468018",billAmount:"2200.00",billnetamount:"2200.00",billdate:"30-05-2021 05:45:10",acceptPayment:!0,acceptPartPay:!1,cellNumber:"905514656",dueFrom:"16/05/2021",dueTo:"16/05/2021",validationId:"HGA8V00A110382264052",billId:"HGA8V00A110382264052B"},{canumber:554984558,mode:"online",address1:"Villa No. 5, Ocean View",address2:"Calangute, Goa",address3:"Goa, India",referenceid:2021052421,insuranceNumber:"LICI2122000037468019",billAmount:"3000.00",billnetamount:"3000.00",billdate:"31-05-2021 06:30:00",acceptPayment:!0,acceptPartPay:!1,cellNumber:"905514657",dueFrom:"17/05/2021",dueTo:"17/05/2021",validationId:"HGA8V00A110382264053",billId:"HGA8V00A110382264053B"}],this.tableConfig={tableHeading:"Transaction Details",columns:[{name:"CA Number",field:"canumber",width:"150"},{name:"Mode",field:"mode",width:"100"},{name:"Address Line 1",field:"address1",width:"200"},{name:"Address Line 2",field:"address2",width:"200"},{name:"Address Line 3",field:"address3",width:"200"},{name:"Reference ID",field:"referenceid",width:"150"},{name:"Insurance Number",field:"insuranceNumber",width:"200"},{name:"Bill Amount",field:"billAmount",width:"150"},{name:"Net Bill Amount",field:"billnetamount",width:"150"},{name:"Bill Date",field:"billdate",width:"200"},{name:"Accept Payment",field:"acceptPayment",width:"150"},{name:"Accept Part Payment",field:"acceptPartPay",width:"150"},{name:"Cell Number",field:"cellNumber",width:"150"},{name:"Due From",field:"dueFrom",width:"150"},{name:"Due To",field:"dueTo",width:"150"},{name:"Validation ID",field:"validationId",width:"200"},{name:"Bill ID",field:"billId",width:"200"}],headerOption:[{value:"add",name:"Get Insurance Status",buttoncss:""}],config:{sorting:{column:"canumber",order:"asc"},pageSizeOptions:[5,10,20],pageSize:10},isRowClickable:!0,isSearchable:!0},this.searchFormConfig={fields:[{type:"text",id:"insuranceNumber",label:"Insurance Number",placeholder:"Enter Insurance Number",class:"form-control",validators:[{isRequired:!1}]},{type:"text",id:"name",label:"Holder Name",placeholder:"Enter Holder Name",class:"form-control",validators:[{isRequired:!1}]},{type:"dropdown",id:"mode",label:"Payment Mode",options:[{label:"Online",value:"Online"},{label:"Offline",value:"Offline"}],class:"form-control",validators:[{isRequired:!1}]}],actions:[{name:"Save",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}]},this.profileFormConfig={fields:[{type:"number",id:"mobile",label:"Mobile Number",placeholder:"Enter Mobile Number",class:"form-control",validators:[{isRequired:!0}]}],actions:[{name:"Save",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}]},this.formConfig={fields:[{key:"customer_id",name:"Customer ID"},{key:"email",name:"Email"},{key:"name",name:"Name"},{key:"mobile",name:"Mobile"},{key:"totalgold",name:"Total Gold"},{key:"totalsilver",name:"Total Silver"},{key:"block_gold_qty",name:"Block Gold QTY"},{key:"block_silver_qty",name:"Block Silver QTY"}],isSubmitBtnRequired:!0},this.getStatusFormConfig={fields:[{type:"text",id:"referenceid",label:"Reference ID",placeholder:"Enter Reference ID",class:"form-control",validators:[{isRequired:!0}]}],isFromPopUP:!0,actions:[{name:"Submit",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}]},this.buyDetails={fields:[{key:"customer_id",name:"Customer ID"},{key:"quote_id",name:"Quote ID"},{key:"quantity",name:"Quantity"},{key:"tax_amt_1",name:"Tax Amount 1"},{key:"tax_amt_2",name:"Tax Amount 2"},{key:"pre_tax_amount",name:"Pre Tax Amount"},{key:"total_amount",name:"Total Amount"},{key:"calculation_type",name:"Calculation Type"},{key:"metal_type",name:"Metal Type"},{key:"quote_date",name:"Quote Date"}],isSubmitBtnRequired:!0},this.CustomerInfoFormConfig={fields:[{key:"customer_id",name:"Customer ID"},{key:"email",name:"Email"},{key:"name",name:"Name"},{key:"mobile",name:"Mobile"},{key:"totalgold",name:"Total Gold"},{key:"totalsilver",name:"Total Silver"},{key:"block_gold_qty",name:"Block Gold QTY"},{key:"block_silver_qty",name:"Block Silver QTY"}],isSubmitBtnRequired:!0},this.BillingInfoFormConfig={fields:[{key:"line1",name:"Line 1"},{key:"line2",name:"Line 2"},{key:"state",name:"State"},{key:"city",name:"City"},{key:"zip",name:"ZIP"},{key:"country",name:"Country"}],isSubmitBtnRequired:!0},this.deliveryInfoFormConfig={fields:[{key:"line1",name:"Line 1"},{key:"line2",name:"Line 2"},{key:"mobile",name:"Mobile"},{key:"state",name:"State"},{key:"city",name:"City"},{key:"zip",name:"ZIP"},{key:"country",name:"Country"}],isSubmitBtnRequired:!0},this.otpFormConfig={fields:[{type:"password",id:"otp",label:"OTP",placeholder:"Enter OTP",class:"form-control",validators:[{isRequired:!0}]}],isFromPopUP:!0,actions:[{name:"Submit",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}]},this.buyGoldFormConfig={fields:[{type:"dropdown",id:"calculation_type",label:"Caluculation Type",options:[{label:"Amount Wise",value:"A"},{label:"Quantity Wise",value:"Q"}],class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"amount",label:"Amount",placeholder:"Enter Amount",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"quantity",label:"Quantity",placeholder:"Enter Quantity",class:"form-control",validators:[{isRequired:!0}]},{type:"dropdown",id:"metal_type",label:"Metal Type",options:[{label:"Gold",value:"G"},{label:"Silver",value:"S"}],class:"form-control",validators:[{isRequired:!0}]}],actions:[{name:"Save",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}]},this.selectedTab="Details",this.premiumBillDetails=null,this.selectedInternalTab="Customer Info"}openDialog(){this.dialog.open(b,{data:{form:this.otpFormConfig,columns:4,formName:"Enter OTP"}}).afterClosed().subscribe(t=>{this.activation=h(h({},this.activation),t),this.selectedInternalTab==="Buy Gold/Silver"?this.getBuyGoldSilverBuyExecute(this.activation):this.selectedInternalTab==="Sell Gold/Silver"&&this.getSellGoldSilverSellExecute(this.activation)})}getDigitalGoldSilverCustomerGetprofile(e){this.apiService.getDigitalGoldSilverCustomerGetprofile(e).subscribe({next:t=>{t.status?(this.uniqueData=t.data,this.selectedBillingAddress=t.data.billing_address[0],this.selectedDeliveryAddress=t.data.delivery_address[0],this.activation=e,this.selectedInternalTab="Customer Info",this.messageNotificationService.success(t.message,"success")):this.messageNotificationService.info(t.message,"info")},error:t=>{this.messageNotificationService.error("Unable To Load Data Getting Server Issue","error"),console.error("Error fetching data:",t)}})}getDigitalGoldSilverCustomerBalanceGet(){this.apiService.getDigitalGoldSilverCustomerBalanceGet(this.activation).subscribe({next:e=>{e.status?(this.customerDetails=e.data,this.messageNotificationService.success(e.message,"success")):this.messageNotificationService.info(e.message,"info")},error:e=>{this.messageNotificationService.error("Unable To Load Data Getting Server Issue","error"),console.error("Error fetching data:",e)}})}getDigitalGoldSilverCustomerActivation(){this.apiService.getDigitalGoldSilverCustomerActivation(this.activation).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success"):this.messageNotificationService.info(e.message,"info")},error:e=>{this.messageNotificationService.error("Unable To Load Data Getting Server Issue","error"),console.error("Error fetching data:",e)}})}getDigitalGoldSilverCustomerDeactivation(){this.apiService.getDigitalGoldSilverCustomerDeactivation(this.activation).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success"):this.messageNotificationService.info(e.message,"info")},error:e=>{this.messageNotificationService.error("Unable To Load Data Getting Server Issue","error"),console.error("Error fetching data:",e)}})}getBuyGoldSilverGetQuotation(e){e.customer_id=this.uniqueData.customer_id,this.apiService.getBuyGoldSilverGetQuotation(e).subscribe({next:t=>{t.status?(this.buyQuotation=t.data,e.quote_id=t.data.quote_id,e.billing_address_id=this.selectedBillingAddress.billing_address_id,this.activation=e,this.getBuyGoldSilverValidateQuote(this.activation),this.messageNotificationService.success(t.message,"success")):this.messageNotificationService.info(t.message,"info")},error:t=>{this.messageNotificationService.error("Unable To Load Data Getting Server Issue","error"),console.error("Error fetching data:",t)}})}getBuyGoldSilverValidateQuote(e){this.apiService.getBuyGoldSilverValidateQuote(e).subscribe({next:t=>{t.status?(this.openDialogView(this.buyQuotation,"Buy Gold/Silver",this.buyDetails,"Buy"),this.messageNotificationService.success(t.message,"success")):this.messageNotificationService.info(t.message,"info")},error:t=>{this.messageNotificationService.error("Unable To Load Data Getting Server Issue","error"),console.error("Error fetching data:",t)}})}getBuyGoldSilverSendOTP(){this.apiService.getBuyGoldSilverSendOTP(this.activation).subscribe({next:e=>{e.status?(this.activation.stateresp=e.data.stateresp,this.openDialog(),this.messageNotificationService.success(e.message,"success")):this.messageNotificationService.info(e.message,"info")},error:e=>{this.messageNotificationService.error("Unable To Load Data Getting Server Issue","error"),console.error("Error fetching data:",e)}})}getBuyGoldSilverBuyExecute(e){this.apiService.getBuyGoldSilverBuyExecute(e).subscribe({next:t=>{t.status?this.messageNotificationService.success(t.message,"success"):this.messageNotificationService.info(t.message,"info")},error:t=>{this.messageNotificationService.error("Unable To Load Data Getting Server Issue","error"),console.error("Error fetching data:",t)}})}openDialogView(e,t,i,n){this.dialog.open(b,{data:{value:e,formName:t,view:i,actionButtonName:n}}).afterClosed().subscribe(V=>{V==="submit"&&this.implementAction()})}implementAction(){this.dialog.open(b,{data:"Confirmation"}).afterClosed().subscribe(t=>{t==="submit"&&this.selectedInternalTab==="Buy Gold/Silver"?this.getBuyGoldSilverSendOTP():t==="submit"&&this.selectedInternalTab==="Sell Gold/Silver"&&this.getBuyGoldSilverSendOTP()})}getBuyGoldSilverTransactionStatus(e){this.apiService.getBuyGoldSilverTransactionStatus(e).subscribe({next:t=>{t.status?this.messageNotificationService.success(t.message,"success"):this.messageNotificationService.info(t.message,"info")},error:t=>{this.messageNotificationService.error("Unable To Load Data Getting Server Issue","error"),console.error("Error fetching data:",t)}})}getSellGoldSilverSellQuotation(e){e.customer_id=this.uniqueData.customer_id,this.apiService.getSellGoldSilverSellQuotation(e).subscribe({next:t=>{t.status?(this.buyQuotation=t.data,e.quote_id=t.data.quote_id,e.billing_address_id=this.selectedBillingAddress.billing_address_id,this.activation=e,this.openDialogView(t.data,"Sell Gold/Silver",this.buyDetails,"Sell"),this.messageNotificationService.success(t.message,"success")):this.messageNotificationService.info(t.message,"info")},error:t=>{this.messageNotificationService.error("Unable To Load Data Getting Server Issue","error"),console.error("Error fetching data:",t)}})}getSellGoldSilverSellExecute(e){this.apiService.getSellGoldSilverSellExecute(e).subscribe({next:t=>{t.status?this.messageNotificationService.success(t.message,"success"):this.messageNotificationService.info(t.message,"info")},error:t=>{this.messageNotificationService.error("Unable To Load Data Getting Server Issue","error"),console.error("Error fetching data:",t)}})}generateUniqueReferenceID(){let e=Math.floor(Math.random()*1e6);return new Date().getTime()+e}static{this.\u0275fac=function(t){return new(t||a)(S(T),S(w),S(N))}}static{this.\u0275cmp=G({type:a,selectors:[["app-digital-gold-silver"]],standalone:!0,features:[D],decls:12,vars:7,consts:[[1,"grid","grid-cols-12","gap-6"],[1,"xl:col-span-12","col-span-12"],[1,"box","box-body","!p-0"],[1,"md:flex","px-4","py-6","items-center","justify-between"],[1,"mt-2","md:mt-0"],[1,"-mb-0.5","sm:flex","sm:space-x-6","rtl:space-x-reverse","flex-wrap"],[1,"w-full","flex","sm:w-auto","hs-tab-active:font-semibold","hs-tab-active:text-primary","hs-tab-active:bg-primary/10","rounded-md","py-2","px-3","text-sm","cursor-pointer",3,"click","ngClass"],[3,"action","formConfig","formName","columnCount"],[3,"action","tableDataSet","tableConfig","tableWidth","formName"],[3,"action","formValue","formName","displayFields"],[3,"selection","formValue","formName","displayFields"],["type","button",1,"ti-btn","ti-btn-outline-success","ti-btn-wave",3,"click"],["type","button",1,"ti-btn","ti-btn-outline-danger","ti-btn-wave",3,"click"]],template:function(t,i){t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"nav",5)(6,"a",6),s("click",function(){return i.selectedTab="Details"}),f(7," Digital Gold/Silver Details "),l(),r(8,"a",6),s("click",function(){return i.selectedTab="Customer Profile"}),f(9," Customer Profile "),l()()()()(),C(10,P,2,7)(11,Q,2,4),l()()),t&2&&(u(6),m("ngClass",g(3,v,i.selectedTab==="Details")),u(2),m("ngClass",g(5,v,i.selectedTab==="Customer Profile")),u(2),y(10,i.selectedTab==="Details"?10:i.selectedTab==="Customer Profile"?11:-1))},dependencies:[k,A,x,I,B]})}}return a})();export{J as DigitalGoldSilverComponent};
