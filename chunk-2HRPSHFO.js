import{b as ge}from"./chunk-EM64PZW2.js";import"./chunk-G7UHNQID.js";import"./chunk-5GEWOZRP.js";import{a as H}from"./chunk-ME7WQYDW.js";import{c as ce,i as me}from"./chunk-62M4YNQY.js";import{E as re,F as se,G as le,K as de,L as pe,M as ue,N as fe}from"./chunk-XPN3NBIY.js";import"./chunk-CARY4E7O.js";import"./chunk-FXOCLQ3T.js";import{a as Z,d as J,h as X,i as Q,j as K,l as ee,m as te,ua as oe,v as ie,x as ne,xa as ae}from"./chunk-EBTZRFCE.js";import{$b as D,Ab as n,Bb as r,Ca as d,Cb as v,Da as p,E as M,Gb as A,Jb as g,Lb as m,Nc as Y,O as R,Qb as E,Rb as U,Sb as L,T as O,Tb as y,Ub as s,Vb as u,Wb as k,Xa as l,Ya as B,Yc as z,Zb as T,_b as P,a as h,ac as q,bc as G,dc as V,ea as I,l as b,lc as N,mc as F,nb as C,pb as f,ta as j,vb as _,wa as $,x as w,yb as S,zb as x}from"./chunk-IZBYZ66D.js";var Ce=(()=>{class o{transform(e){if(e=+e,!e||e<0||e>2359)return"Invalid Time";let i=Math.floor(e/100),t=e%100,a=i>=12?"PM":"AM";return i=i%12||12,`${i}:${t.toString().padStart(2,"0")} ${a}`}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275pipe=$({name:"timeFormat",type:o,pure:!0,standalone:!0})}}return o})();var ke=["sourceSearchInput"],he=["destinationSearchInput"],W=(o,c)=>c.id,be=(o,c)=>c.bpName,_e=o=>({"ti-btn-primary":o});function Se(o,c){if(o&1){let e=A();v(0,"app-dynamic-form",12),n(1,"app-data-grid",13),g("action",function(t){d(e);let a=m();return p(a.applyActionOn(t))}),r()}if(o&2){let e=m();f("formConfig",e.searchFormConfig)("formName","Search")("columnCount",3),l(),f("tableDataSet",e.bookingDetails)("tableConfig",e.tableConfig)("tableWidth",100)("formName","Booking Details")}}function xe(o,c){if(o&1&&(n(0,"mat-option",36),s(1),r()),o&2){let e=c.$implicit;f("value",e.name),l(),k(" ",e.name," ")}}function ye(o,c){if(o&1&&S(0,xe,2,2,"mat-option",36,W),o&2){let e=m(2);x(e.sourceOptions)}}function Be(o,c){o&1&&(n(0,"div",26),s(1,"Pickup Location is required."),r())}function Ae(o,c){if(o&1&&(n(0,"mat-option",36),s(1),r()),o&2){let e=c.$implicit;f("value",e.name),l(),k(" ",e.name," ")}}function Te(o,c){if(o&1&&S(0,Ae,2,2,"mat-option",36,W),o&2){let e=m(2);x(e.destinationOptions)}}function Pe(o,c){o&1&&(n(0,"div",26),s(1,"Drop Location is required."),r())}function De(o,c){o&1&&(n(0,"div",26),s(1,"Journey Date is required."),r())}function Ne(o,c){if(o&1&&(n(0,"li",55)(1,"div",42),v(2,"div",56),n(3,"div",57)(4,"div")(5,"p",58),s(6),r(),n(7,"p",59),s(8),N(9,"timeFormat"),n(10,"span",60),s(11),r()()()()()()),o&2){let e=c.$implicit;l(6),u(e.bpName),l(2),u(F(9,3,e.time)),l(3),u(e.address)}}function Fe(o,c){if(o&1&&S(0,Ne,12,5,"li",55,be),o&2){let e=m().$implicit;x(e.boardingTimes)}}function we(o,c){if(o&1&&(n(0,"li",55)(1,"div",42),v(2,"div",56),n(3,"div",57)(4,"div")(5,"p",58),s(6),r(),n(7,"p",59),s(8),N(9,"timeFormat"),n(10,"span",60),s(11),r()()()()()()),o&2){let e=m().$implicit;l(6),u(e.boardingTimes==null?null:e.boardingTimes.bpName),l(2),k("",F(9,3,e.boardingTimes==null?null:e.boardingTimes.time)," "),l(3),k(" ",e.boardingTimes==null?null:e.boardingTimes.address,"")}}function Me(o,c){if(o&1){let e=A();n(0,"div",37)(1,"div",16)(2,"div",17),s(3),r(),n(4,"button",18),g("click",function(){d(e);let t=m(3);return p(t.openDialog())}),s(5,"Avail Seat"),r()(),n(6,"div",38)(7,"div",39)(8,"div",15)(9,"div",40)(10,"div",17),s(11,"Contact Details"),r()(),n(12,"div",41)(13,"div",42)(14,"div",43)(15,"div")(16,"h6",44),s(17,"Bus Conductor"),r(),n(18,"p",45),s(19," bus_driver@gmail.com"),r(),n(20,"p",46),s(21),r()()(),n(22,"div"),v(23,"i",47),r()()()()(),n(24,"div",39)(25,"div",15)(26,"div",40)(27,"div",17),s(28,"Bus Details"),r()(),n(29,"div",48)(30,"p",49),s(31,"Seats Available: "),n(32,"span",50),s(33),r()(),n(34,"p",49),s(35,"Window Seats: "),n(36,"span",51),s(37),r()(),n(38,"p",52),s(39,"AC Bus: "),n(40,"span",53),s(41),r()()()()(),n(42,"div",39)(43,"div",15)(44,"div",40)(45,"div",17),s(46,"Boarding Points"),r()(),n(47,"div",48)(48,"ul",54),C(49,Fe,2,0)(50,we,12,5),r()()()(),n(51,"div",39)(52,"div",15)(53,"div",40)(54,"div",17),s(55,"Dropping Points"),r()(),n(56,"div",48)(57,"ul",54)(58,"li",55)(59,"div",42),v(60,"div",56),n(61,"div",57)(62,"div")(63,"p",58),s(64),r(),n(65,"p",59),s(66),N(67,"timeFormat"),n(68,"span",60),s(69),r()()()()()()()()()()()()}if(o&2){let e=c.$implicit,i=m(3);l(3),k(" ",e.busType," "),l(18),k(" ",i.isArray(e.boardingTimes)?e.boardingTimes[0].contactNumber:e.boardingTimes.contactNumber," "),l(12),u(e.availableSeats),l(4),u(e.avlWindowSeats),l(4),u(e.nonAC==="false"?"Yes":"No"),l(8),_(49,i.isArray(e.boardingTimes)?49:50),l(15),u(e.droppingTimes.bpName),l(2),u(F(67,9,e.droppingTimes.time)),l(3),u(e.droppingTimes.address)}}function Re(o,c){if(o&1&&(n(0,"div",35),S(1,Me,70,11,"div",37,W),r()),o&2){let e=m(2);l(),x(e.availableTrips)}}function Oe(o,c){o&1&&(n(0,"p",61),s(1,"No trips available."),r())}function Ie(o,c){if(o&1){let e=A();n(0,"div",14)(1,"div",6)(2,"div",15)(3,"div",16)(4,"div",17),s(5,"Search Bus"),r(),n(6,"button",18),g("click",function(){d(e);let t=y(10),a=m();return p(a.getAvailableTrips(t.value))}),s(7,"Submit"),r()(),n(8,"div",19)(9,"form",null,0)(11,"div",20)(12,"div",21)(13,"label",22),s(14,"Pickup Location"),n(15,"span",23),s(16,"*"),r()(),n(17,"input",24,1),D("ngModelChange",function(t){d(e);let a=m();return P(a.formData.source_id,t)||(a.formData.source_id=t),p(t)}),g("input",function(t){d(e);let a=m();return p(a.getFilteredOptions(t,1))}),r(),n(19,"mat-autocomplete",25,2),g("optionSelected",function(t){d(e);let a=m();return p(a.onSourceSelected(t,1))}),C(21,ye,2,0),r(),C(22,Be,2,0,"div",26),r(),n(23,"div",21)(24,"label",27),s(25,"Drop Location"),n(26,"span",23),s(27,"*"),r()(),n(28,"input",28,3),D("ngModelChange",function(t){d(e);let a=m();return P(a.formData.destination_id,t)||(a.formData.destination_id=t),p(t)}),g("input",function(t){d(e);let a=m();return p(a.getFilteredOptions(t,2))}),r(),n(30,"mat-autocomplete",25,4),g("optionSelected",function(t){d(e);let a=m();return p(a.onSourceSelected(t,2))}),C(32,Te,2,0),r(),C(33,Pe,2,0,"div",26),r(),n(34,"div",21)(35,"label",29),s(36,"Journey Date"),n(37,"span",23),s(38,"*"),r()(),n(39,"div",30)(40,"div",31),v(41,"i",32),r(),n(42,"input",33),D("ngModelChange",function(t){d(e);let a=m();return P(a.formData.date_of_journey,t)||(a.formData.date_of_journey=t),p(t)}),r()(),C(43,De,2,0,"div",26),r()()()()()()(),n(44,"div",34),C(45,Re,3,0,"div",35)(46,Oe,2,0),r()}if(o&2){let e=y(10),i=y(20),t=y(31),a=m();l(17),T("ngModel",a.formData.source_id),f("matAutocomplete",i),l(4),_(21,a.sourceOptions.length>0?21:-1),l(),_(22,e.controls.source_id!=null&&e.controls.source_id.invalid&&(e.controls.source_id!=null&&e.controls.source_id.dirty||e.controls.source_id!=null&&e.controls.source_id.touched)?22:-1),l(6),T("ngModel",a.formData.destination_id),f("matAutocomplete",t),l(4),_(32,a.destinationOptions.length>0?32:-1),l(),_(33,e.controls.destination_id!=null&&e.controls.destination_id.invalid&&(e.controls.destination_id!=null&&e.controls.destination_id.dirty||e.controls.destination_id!=null&&e.controls.destination_id.touched)?33:-1),l(9),T("ngModel",a.formData.date_of_journey),f("altInput",!0)("convertModelValue",!0),l(),_(43,e.controls.date_of_journey!=null&&e.controls.date_of_journey.invalid&&(e.controls.date_of_journey!=null&&e.controls.date_of_journey.dirty||e.controls.date_of_journey!=null&&e.controls.date_of_journey.touched)?43:-1),l(2),_(45,a.availableTrips?45:46)}}var it=(()=>{class o{generateUniqueReferenceID(){let e=Math.floor(Math.random()*1e6);return new Date().getTime()+e}formatDate(e){let i=e.getFullYear(),t=("0"+(e.getMonth()+1)).slice(-2),a=("0"+e.getDate()).slice(-2);return`${i}-${t}-${a}`}applyActionOn(e){if(e){let i=this.getUserDetails();e=h(h({},i),e)}this.selectedTab==="Booking Details"?this.openDialog():this.getAvailableTrips(e)}getFilteredOptions(e,i){i===1?M(this.sourceSearchInput.nativeElement,"keyup").pipe(w(t=>t.target.value),O(),R(1e3),I(this.destroy$)).subscribe(t=>{t===""&&(this.selevtedSourceCity=null,this.destroy$=new b,this.getFilteredOptions(e,i)),this.lastSearchedCity!==t&&(this.lastSearchedCity=t,this.getSourceCity(t,i))}):M(this.destinationSearchInput.nativeElement,"keyup").pipe(w(t=>t.target.value),O(),R(1e3),I(this.destroy$)).subscribe(t=>{t===""&&(this.selevtedDestinationCity=null,this.destroy$=new b,this.getFilteredOptions(e,i)),this.lastDestinationSearchedCity!==t&&(this.lastDestinationSearchedCity=t,this.getSourceCity(t,i))})}onSourceSelected(e,i){let t=e.option.value;i===1?(this.selevtedSourceCity=this.sourceOptions.find(a=>a.name===t),this.destroy$.next()):i===2&&(this.selevtedDestinationCity=this.destinationOptions.find(a=>a.name===t),this.destroy$.next())}getAvailableTrips(e){let i=this.getUserDetails();i=h(h({},e),i),i.source_id=3,i.destination_id=6,this.apiService.getAvailableTrips(i).subscribe({next:t=>{t.status?this.availableTrips=t.data.availableTrips:this.messageNotificationService.error(t.message,"error",5e3)},error:t=>{this.messageNotificationService.error("Unable to Find Trip Details","error"),console.error("Error fetching data:",t)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}getSourceCity(e,i){let t=this.getUserDetails();t.searchText=e,this.apiService.getSourceCity(t).subscribe({next:a=>{a.status&&(i===1?this.sourceOptions=a.data.cities:i===2&&(this.destinationOptions=a.data.cities))},error:a=>{this.messageNotificationService.error("Unable to Find Source/Destination List","error"),console.error("Error fetching data:",a)}})}getUserDetails(){return{refid:this.generateUniqueReferenceID().toString()}}constructor(e,i,t){this.dialog=e,this.apiService=i,this.messageNotificationService=t,this.selectedTab="Search Bus",this.formConfig={fields:[{type:"text",id:"name",label:"Passenger Name",placeholder:"Enter Name",class:"form-control",validators:[{isRequired:!0}]},{type:"number",id:"age",label:"Age",placeholder:"Enter Age",class:"form-control",validators:[{isRequired:!0}]},{type:"dropdown",id:"gender",label:"Gender",options:[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}],class:"form-control",validators:[{isRequired:!0}]}],actions:[{name:"Submit",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}],isFromPopUP:!0,isMulti:!0,formHeight:600},this.bookingDetails=[{BookingOfficerFirstName:"Emily",BookingOfficerLastName:"Williams",PeopleCount:20,SeatCount:25,PickUpDate:"01/23/2025",PickUpTime:"11:30 AM",PickupAddress:"501 Maple Dr, Block C, City B, Region X, 123987, India",DestinationAddress:"403 Birch Ln, Building A, City C, Region Y, 321789, India",ReturnDate:"01/27/2025",ReturnTime:"06:00 PM",ActivityName:"Activity 3",Comments:"Sample comment 3"},{BookingOfficerFirstName:"John",BookingOfficerLastName:"Doe",PeopleCount:15,SeatCount:18,PickUpDate:"01/24/2025",PickUpTime:"02:00 PM",PickupAddress:"789 Oak St, Block A, City D, Region Z, 998877, India",DestinationAddress:"567 Pine Ave, Building B, City E, Region W, 554433, India",ReturnDate:"01/28/2025",ReturnTime:"05:00 PM",ActivityName:"Activity 1",Comments:"Sample comment 1"},{BookingOfficerFirstName:"Anna",BookingOfficerLastName:"Smith",PeopleCount:30,SeatCount:35,PickUpDate:"01/25/2025",PickUpTime:"09:00 AM",PickupAddress:"321 Elm St, Block B, City F, Region Y, 112233, India",DestinationAddress:"876 Cedar Rd, Building C, City G, Region X, 223344, India",ReturnDate:"01/29/2025",ReturnTime:"04:00 PM",ActivityName:"Activity 2",Comments:"Sample comment 2"},{BookingOfficerFirstName:"Michael",BookingOfficerLastName:"Johnson",PeopleCount:25,SeatCount:30,PickUpDate:"01/26/2025",PickUpTime:"10:15 AM",PickupAddress:"654 Birch St, Block C, City H, Region Z, 445566, India",DestinationAddress:"432 Pine Blvd, Building D, City I, Region W, 667788, India",ReturnDate:"01/30/2025",ReturnTime:"07:00 PM",ActivityName:"Activity 4",Comments:"Sample comment 4"},{BookingOfficerFirstName:"Sophia",BookingOfficerLastName:"Brown",PeopleCount:18,SeatCount:22,PickUpDate:"01/27/2025",PickUpTime:"03:30 PM",PickupAddress:"852 Maple Ave, Block D, City J, Region Y, 998899, India",DestinationAddress:"753 Cedar St, Building E, City K, Region X, 445577, India",ReturnDate:"02/01/2025",ReturnTime:"08:00 PM",ActivityName:"Activity 5",Comments:"Sample comment 5"},{BookingOfficerFirstName:"David",BookingOfficerLastName:"Williams",PeopleCount:22,SeatCount:28,PickUpDate:"01/28/2025",PickUpTime:"12:00 PM",PickupAddress:"123 Oak Dr, Block E, City L, Region Z, 998877, India",DestinationAddress:"555 Birch Ln, Building F, City M, Region W, 554433, India",ReturnDate:"02/02/2025",ReturnTime:"06:30 PM",ActivityName:"Activity 6",Comments:"Sample comment 6"},{BookingOfficerFirstName:"Isabella",BookingOfficerLastName:"Miller",PeopleCount:12,SeatCount:15,PickUpDate:"01/29/2025",PickUpTime:"04:00 PM",PickupAddress:"987 Pine Blvd, Block F, City N, Region X, 556677, India",DestinationAddress:"654 Maple Rd, Building G, City O, Region Y, 998877, India",ReturnDate:"02/03/2025",ReturnTime:"09:00 PM",ActivityName:"Activity 7",Comments:"Sample comment 7"},{BookingOfficerFirstName:"Liam",BookingOfficerLastName:"Taylor",PeopleCount:28,SeatCount:33,PickUpDate:"01/30/2025",PickUpTime:"01:30 PM",PickupAddress:"432 Cedar St, Block G, City P, Region Z, 112233, India",DestinationAddress:"876 Oak Ln, Building H, City Q, Region W, 223344, India",ReturnDate:"02/04/2025",ReturnTime:"05:30 PM",ActivityName:"Activity 8",Comments:"Sample comment 8"},{BookingOfficerFirstName:"Ava",BookingOfficerLastName:"Davis",PeopleCount:20,SeatCount:25,PickUpDate:"02/01/2025",PickUpTime:"10:30 AM",PickupAddress:"743 Elm Rd, Block H, City R, Region X, 445566, India",DestinationAddress:"111 Pine St, Building I, City S, Region Y, 667788, India",ReturnDate:"02/05/2025",ReturnTime:"07:00 PM",ActivityName:"Activity 9",Comments:"Sample comment 9"},{BookingOfficerFirstName:"James",BookingOfficerLastName:"Wilson",PeopleCount:35,SeatCount:40,PickUpDate:"02/02/2025",PickUpTime:"11:00 AM",PickupAddress:"432 Oak Blvd, Block I, City T, Region Z, 998899, India",DestinationAddress:"654 Maple Ln, Building J, City U, Region W, 112233, India",ReturnDate:"02/06/2025",ReturnTime:"06:30 PM",ActivityName:"Activity 10",Comments:"Sample comment 10"},{BookingOfficerFirstName:"Mason",BookingOfficerLastName:"Clark",PeopleCount:10,SeatCount:12,PickUpDate:"02/03/2025",PickUpTime:"03:00 PM",PickupAddress:"876 Cedar Rd, Block J, City V, Region X, 223344, India",DestinationAddress:"123 Oak Blvd, Building K, City W, Region Y, 998877, India",ReturnDate:"02/07/2025",ReturnTime:"08:00 PM",ActivityName:"Activity 11",Comments:"Sample comment 11"},{BookingOfficerFirstName:"Ethan",BookingOfficerLastName:"Lopez",PeopleCount:40,SeatCount:45,PickUpDate:"02/04/2025",PickUpTime:"02:30 PM",PickupAddress:"987 Oak Dr, Block K, City X, Region Z, 554433, India",DestinationAddress:"543 Pine Rd, Building L, City Y, Region W, 667788, India",ReturnDate:"02/08/2025",ReturnTime:"07:30 PM",ActivityName:"Activity 12",Comments:"Sample comment 12"},{BookingOfficerFirstName:"Charlotte",BookingOfficerLastName:"Martinez",PeopleCount:16,SeatCount:20,PickUpDate:"02/05/2025",PickUpTime:"01:00 PM",PickupAddress:"654 Elm Ave, Block L, City Z, Region Y, 223344, India",DestinationAddress:"432 Maple Blvd, Building M, City AA, Region X, 998877, India",ReturnDate:"02/09/2025",ReturnTime:"06:00 PM",ActivityName:"Activity 13",Comments:"Sample comment 13"},{BookingOfficerFirstName:"Alexander",BookingOfficerLastName:"Harris",PeopleCount:14,SeatCount:18,PickUpDate:"02/06/2025",PickUpTime:"12:30 PM",PickupAddress:"123 Pine Rd, Block M, City AB, Region W, 667788, India",DestinationAddress:"876 Cedar Blvd, Building N, City AC, Region Z, 998877, India",ReturnDate:"02/10/2025",ReturnTime:"05:00 PM",ActivityName:"Activity 14",Comments:"Sample comment 14"},{BookingOfficerFirstName:"Benjamin",BookingOfficerLastName:"Young",PeopleCount:27,SeatCount:32,PickUpDate:"02/07/2025",PickUpTime:"04:30 PM",PickupAddress:"543 Oak Ln, Block N, City AD, Region Y, 998899, India",DestinationAddress:"432 Maple Dr, Building O, City AE, Region Z, 112233, India",ReturnDate:"02/11/2025",ReturnTime:"08:30 PM",ActivityName:"Activity 15",Comments:"Sample comment 15"}],this.busConfig={tableHeading:"Booking Details",columns:[{name:"Booking Officer First Name",field:"BookingOfficerFirstName",width:"150"},{name:"Booking Officer Last Name",field:"BookingOfficerLastName",width:"150"},{name:"People Count",field:"PeopleCount",width:"100"},{name:"Seat Count",field:"SeatCount",width:"100"},{name:"Pick Up Date",field:"PickUpDate",width:"150"},{name:"Pick Up Time",field:"PickUpTime",width:"150"},{name:"Pick Up Address",field:"PickupAddress",width:"300"},{name:"Destination Address",field:"DestinationAddress",width:"300"},{name:"Return Date",field:"ReturnDate",width:"150"},{name:"Return Time",field:"ReturnTime",width:"150"},{name:"Activity Name",field:"ActivityName",width:"150"},{name:"Comments",field:"Comments",width:"250"}],headerOption:[{value:"add",name:"Book Seat",buttoncss:""}],config:{sorting:{column:"Name",order:"asc"},pageSizeOptions:[5,10,20],pageSize:5},isRowClickable:!1,isSearchable:!0},this.tableConfig={tableHeading:"Booking Details",columns:[{name:"Booking Officer First Name",field:"BookingOfficerFirstName",width:"150"},{name:"Booking Officer Last Name",field:"BookingOfficerLastName",width:"150"},{name:"People Count",field:"PeopleCount",width:"100"},{name:"Seat Count",field:"SeatCount",width:"100"},{name:"Pick Up Date",field:"PickUpDate",width:"150"},{name:"Pick Up Time",field:"PickUpTime",width:"150"},{name:"Pick Up Address",field:"PickupAddress",width:"300"},{name:"Destination Address",field:"DestinationAddress",width:"300"},{name:"Return Date",field:"ReturnDate",width:"150"},{name:"Return Time",field:"ReturnTime",width:"150"},{name:"Activity Name",field:"ActivityName",width:"150"},{name:"Comments",field:"Comments",width:"250"}],config:{sorting:{column:"Name",order:"asc"},pageSizeOptions:[5,10,20],pageSize:5},isRowClickable:!1,isSearchable:!0},this.searchFormConfig={fields:[{type:"dateTime",id:"ParentUser",label:"Pickup Date",placeholder:"All",class:"form-control",validators:[{isRequired:!1}]},{type:"dateTime",id:"ParentUser",label:"Return Date",placeholder:"All",class:"form-control",validators:[{isRequired:!1}]}],actions:[{name:"Save",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}]},this.lastSearchedCity="",this.lastDestinationSearchedCity="",this.formData={source_id:"",destination_id:"",date_of_journey:this.formatDate(new Date)},this.destinationOptions=[],this.sourceOptions=[],this.destroy$=new b,this.availableTrips=[{AC:"true",additionalCommission:"0",agentServiceCharge:"0.00",agentServiceChargeAllowed:"true",arrivalTime:"1380",availCatCard:"false",availSrCitizen:"false",availableSeats:"56",availableSingleSeat:"0",avlWindowSeats:"-1",boCommission:"5.00",boPriorityOperator:"false",boardingTimes:[{address:"Domlur",bpId:"43227",bpName:"Domlur",contactNumber:"7204587325",landmark:"Domlur",location:"Domlur",prime:"false",time:"1320"},{address:"tuk",bpId:"71470",bpName:"CV Dasarahalli",contactNumber:"1234567890",landmark:"sdad",location:"Domlur",prime:"false",time:"1330"},{address:"sdfasdfasdf",bpId:"63869",bpName:"Koramangala1",contactNumber:"1234567890",landmark:"sdf",location:"Koramangala",prime:"false",time:"1340"}],bookable:"true",bpDpSeatLayout:"false",busCancelled:"false",busImageCount:"-1",busRoutes:"Bangalore-Hyderabad-Chennai",busType:"Mercedes Benz A/C Seater/Sleeper Multi Axle (2+3)",busTypeId:"1101",callFareBreakUpAPI:"false",cancellationCalculationTimestamp:"Wed Apr 02 10:40:00 IST 2025",cancellationPolicy:"0:2:100:0;2:24:50:0;24:52:30:0;52:-1:10:0;",cpId:"861",departureTime:"1320",destination:"6",doj:"2025-04-02T00:00:00+05:30",dropPointMandatory:"false",droppingTimes:{address:"affafafaf",bpId:"24510",bpName:"Ameerpet",contactNumber:"9999999999999999",landmark:"Testing testing",location:"Ameerpet",prime:"true",time:"1380"},duration:"1:00 hrs",exactSearch:"false",fareDetails:[{bankTrexAmt:"0",baseFare:"110.00",bookingFee:"0",childFare:"0",gst:"5.50",levyFare:"0",markupFareAbsolute:"0",markupFarePercentage:"0",opFare:"0",opGroupFare:"0",operatorServiceChargeAbsolute:"0.00",operatorServiceChargePercentage:"0.00",serviceCharge:"0.00",serviceTaxAbsolute:"5.50",serviceTaxPercentage:"5",srtFee:"0",tollFee:"0",totalFare:"115.50"},{bankTrexAmt:"0",baseFare:"120.00",bookingFee:"0",childFare:"0",gst:"6.00",levyFare:"0",markupFareAbsolute:"0",markupFarePercentage:"0",opFare:"0",opGroupFare:"0",operatorServiceChargeAbsolute:"0.00",operatorServiceChargePercentage:"0.00",serviceCharge:"0.00",serviceTaxAbsolute:"6.00",serviceTaxPercentage:"5",srtFee:"0",tollFee:"0",totalFare:"126.00"},{bankTrexAmt:"0",baseFare:"110.00",bookingFee:"0",childFare:"0",gst:"5.50",levyFare:"0",markupFareAbsolute:"0",markupFarePercentage:"0",opFare:"0",opGroupFare:"0",operatorServiceChargeAbsolute:"0.00",operatorServiceChargePercentage:"0.00",serviceCharge:"0.00",serviceTaxAbsolute:"5.50",serviceTaxPercentage:"5",srtFee:"0",tollFee:"0",totalFare:"115.50"},{bankTrexAmt:"0",baseFare:"110.00",bookingFee:"0",childFare:"0",gst:"5.50",levyFare:"0",markupFareAbsolute:"0",markupFarePercentage:"0",opFare:"0",opGroupFare:"0",operatorServiceChargeAbsolute:"0.00",operatorServiceChargePercentage:"0.00",serviceCharge:"0.00",serviceTaxAbsolute:"5.50",serviceTaxPercentage:"5",srtFee:"0",tollFee:"0",totalFare:"115.50"}],fares:["115.50","126.00"],flashDealEnabled:"false",flatComApplicable:"false",flatSSComApplicable:"false",gdsCommission:"0",groupOfferPriceEnabled:"false",happyHours:"false",id:"2000000152050019085",idProofRequired:"false",imagesMetadataUrl:"/images/null",isLMBAllowed:"false",liveTrackingAvailable:"false",maxSeatsPerTicket:"6",nextDay:"false",noSeatLayoutEnabled:"false",nonAC:"false",offerPriceEnabled:"false",operator:"10419079",otgEnabled:"false",partialCancellationAllowed:"true",partnerBaseCommission:"5.00",primaryPaxCancellable:"true",primo:"false",rbServiceId:"19085",routeId:"2000000100000019085",rtc:"false",SSAgentAccount:"false",seater:"true",selfInventory:"false",serviceStartTime:"2025-04-02 10:40:00",singleLadies:"false",sleeper:"true",source:"3",tatkalTime:"2.00",travels:"Cancelbuscheck",unAvailable:"false",vaccinatedBus:"false",vaccinatedStaff:"false",vehicleType:"BUS",zeroCancellationTime:"10.00",mTicketEnabled:"true"}]}ngOnInit(){this.destroy$=new b}openDialog(){this.dialog.open(ge,{data:{form:this.formConfig,columns:4,formName:"Reserve Your Seat"}}).afterClosed().subscribe(i=>{console.log(`Dialog result: ${i}`)})}GetCurrentTripDetails(){this.apiService.GetCurrentTripDetails({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to Find Trip Details","error"),console.error("Error fetching data:",e)}})}BlockBusTicket(){this.apiService.BlockBusTicket({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to block seat","error"),console.error("Error fetching data:",e)}})}BookBusTicket(){this.apiService.BookBusTicket({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to book bus ticket","error"),console.error("Error fetching data:",e)}})}GetBookedTickets(){this.apiService.GetBookedTickets({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to get booked ticket","error"),console.error("Error fetching data:",e)}})}CheckBookedTickets(){this.apiService.CheckBookedTickets({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to check booked ticket","error"),console.error("Error fetching data:",e)}})}GetCancelationData(){this.apiService.GetCancelationData({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to Cancel Trip","error"),console.error("Error fetching data:",e)}})}isArray(e){return Array.isArray(e)}static{this.\u0275fac=function(i){return new(i||o)(B(ce),B(H),B(Z))}}static{this.\u0275cmp=j({type:o,selectors:[["app-bus-booking"]],viewQuery:function(i,t){if(i&1&&(E(ke,5),E(he,5)),i&2){let a;U(a=L())&&(t.sourceSearchInput=a.first),U(a=L())&&(t.destinationSearchInput=a.first)}},standalone:!0,features:[q([de]),G],decls:12,vars:7,consts:[["myForm","ngForm"],["sourceSearchInput",""],["autoSource","matAutocomplete"],["destinationSearchInput",""],["autoDestination","matAutocomplete"],[1,"grid","grid-cols-12","gap-6"],[1,"xl:col-span-12","col-span-12"],[1,"box","box-body","!p-0"],[1,"md:flex","px-4","py-6","items-center","justify-between"],[1,"mt-2","md:mt-0"],[1,"-mb-0.5","sm:flex","sm:space-x-6","rtl:space-x-reverse","flex-wrap"],[1,"w-full","flex","sm:w-auto","hs-tab-active:font-semibold","hs-tab-active:text-primary","hs-tab-active:bg-primary/10","rounded-md","py-2","px-3","text-sm","cursor-pointer",3,"click","ngClass"],[3,"formConfig","formName","columnCount"],[3,"action","tableDataSet","tableConfig","tableWidth","formName"],[1,"grid","grid-cols-12","gap-6","text-defaultsize"],[1,"box"],[1,"box-header","justify-between"],[1,"box-title"],["type","submit",1,"ti-btn","ti-btn-primary",3,"click"],[1,"box-body","overflow-auto","max-h-[650px]"],[1,"grid","grid-cols-12","sm:gap-6"],[1,"xl:col-span-4","lg:col-span-4","md:col-span-4","sm:col-span-12","col-span-12"],["for","source_id",1,"form-label"],[2,"color","red"],["type","text","id","source_id","name","source_id","placeholder","Type a location","required","",1,"form-control",3,"ngModelChange","input","ngModel","matAutocomplete"],[3,"optionSelected"],[1,"text-danger"],["for","destination_id",1,"form-label"],["type","text","id","destination_id","name","destination_id","placeholder","Type a location","required","",1,"form-control",3,"ngModelChange","input","ngModel","matAutocomplete"],["for","date_of_journey",1,"form-label"],[1,"input-group"],[1,"input-group-text","text-[#8c9097]","dark:text-white/50"],[1,"ri-calendar-line"],["type","text","id","date_of_journey","name","date_of_journey","placeholder","Select a date","mwlFlatpickr","","required","",1,"form-control",3,"ngModelChange","ngModel","altInput","convertModelValue"],[1,"container","mx-auto","p-4"],[1,"xl:col-span-4","col-span-12"],[3,"value"],[1,"box","terms-box","fullscreentoggle"],[1,"box-body","flex","flex-wrap","lg:flex-nowrap","gap-4"],[1,"xxl:w-1/4","xl:w-1/4","lg:w-1/4","md:w-full","sm:w-full","w-full"],[1,"box-header"],[1,"box-body","contact-action"],[1,"flex","items-start"],[1,"flex","flex-grow","flex-wrap","gap-2"],[1,"mb-1","font-semibold","text-[1rem]"],[1,"mb-1","text-[#8c9097]","dark:text-white/50","contact-mail","text-truncate"],[1,"font-semibold","text-[0.6875rem]","mb-0","!text-primary"],[1,"ri-heart-3-fill","text-[1rem]","text-danger"],[1,"box-body"],[1,"text-gray-700","dark:text-white/70","font-medium","mb-2"],[1,"font-semibold"],[1,"font-semibold","text-red-500"],[1,"text-gray-700","dark:text-white/70","font-medium"],[1,"font-semibold","text-green-500"],[1,"list-none","timeline-widget","mb-0"],[1,"timeline-widget-list"],[1,"me-[3rem]","pr-[16px]","text-center"],[1,"flex","flex-wrap","flex-grow","items-start","justify-between"],[1,"mb-1","sm:text-truncate","timeline-widget-content","text-wrap"],[1,"mb-0","text-[0.75rem]","leading-none","text-[#8c9097]","dark:text-white/50"],[1,"badge","bg-primary/10","text-primary","ms-2"],[1,"text-center","text-gray-500"]],template:function(i,t){i&1&&(n(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"nav",10)(6,"a",11),g("click",function(){return t.selectedTab="Booking Details"}),s(7," Booking Details "),r(),n(8,"a",11),g("click",function(){return t.selectedTab="Search Bus"}),s(9," Search Bus "),r()()()()(),C(10,Se,2,7)(11,Ie,47,13),r()()),i&2&&(l(6),f("ngClass",V(3,_e,t.selectedTab==="Booking Details")),l(2),f("ngClass",V(5,_e,t.selectedTab==="Search Bus")),l(2),_(10,t.selectedTab==="Booking Details"?10:11))},dependencies:[me,fe,z,Y,ne,te,J,X,Q,ie,ee,K,le,re,oe,se,ae,ue,pe,Ce],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.group[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}.box[_ngcontent-%COMP%]{box-shadow:none!important;margin-bottom:16px!important}"]})}}return o})();export{it as BusBookingComponent};
