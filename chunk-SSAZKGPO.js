import{b as I}from"./chunk-EM64PZW2.js";import{a as S}from"./chunk-G7UHNQID.js";import"./chunk-5GEWOZRP.js";import{a as D}from"./chunk-ME7WQYDW.js";import{c as N,i as R}from"./chunk-62M4YNQY.js";import{N as U}from"./chunk-XPN3NBIY.js";import"./chunk-CARY4E7O.js";import"./chunk-FXOCLQ3T.js";import{a as C}from"./chunk-EBTZRFCE.js";import{Ab as b,Bb as f,Ca as s,Cb as h,Da as n,Gb as v,Jb as g,Lb as o,Xa as m,Ya as l,bc as y,nb as u,pb as d,ta as c,vb as p}from"./chunk-IZBYZ66D.js";function A(r,x){if(r&1){let e=v();b(0,"app-data-grid",2),g("action",function(a){s(e);let i=o();return n(i.applyActionOn(a))})("buttonAction",function(a){s(e);let i=o();return n(i.editUserDetails(a))}),f()}if(r&2){let e=o();d("tableDataSet",e.userDetails)("tableConfig",e.tableConfig)("tableWidth",100)("formName","User Details")}}var B=(()=>{class r{applyActionOn(e){this.openDialog()}constructor(e,t,a,i){this.dialog=e,this.messageNotificationService=t,this.apiService=a,this.utilityService=i,this.userDetails=[],this.tableConfig={tableHeading:"User Details",columns:[{name:"Outlet Name",field:"outletName",width:"150"},{name:"Name",field:"fullName",width:"150"},{name:"Mobile",field:"phoneNumber",width:"150"},{name:"User Name",field:"userName",width:"100"},{name:"User Type",field:"roleName",width:"150"},{name:"Email",field:"email",width:"200"},{name:"Pincode",field:"userPinCode",width:"100"},{name:"ID Type",field:"idType",width:"150"},{name:"ID Number",field:"idNumber",width:"200"},{name:"State",field:"state",width:"150"},{name:"City",field:"city",width:"150"}],headerOption:[{value:"add",name:"ADD USER",buttoncss:""}],config:{sorting:{column:"Name",order:"asc"},pageSizeOptions:[5,10,20],pageSize:5},handlers:[{text:"Edit",title:"Edit User Details",type:"info",icon:"ri-pencil-line",color:"primary"}],isRowClickable:!1,isSearchable:!0},this.searchFormConfig={fields:[{type:"dropdown",id:"UserType",label:"User Type",options:[{value:"all",label:"All"},{value:"admin",label:"Admin"},{value:"user",label:"User"}],class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"ParentUser",label:"Parent User",placeholder:"All",class:"form-control",validators:[{isRequired:!1}]},{type:"dropdown",id:"AccountStatus",label:"Account Status",options:[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"}],class:"form-control",validators:[{isRequired:!0}]},{type:"dropdown",id:"KYCStatus",label:"KYC Status",options:[{value:"all",label:"All"},{value:"completed",label:"Completed"},{value:"pending",label:"Pending"}],class:"form-control",validators:[{isRequired:!0}]}],actions:[{name:"Save",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}]},this.formConfig={fields:[{type:"dropdown",id:"roleID",label:"Select Role Type",options:[{value:1,label:"Admin"},{value:2,label:"User"},{value:3,label:"Retailer"},{value:4,label:"Distributor"},{value:5,label:"Super Distributor"},{value:6,label:"Super Admin"}],class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"firstName",label:"First Name",placeholder:"First Name",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"lastName",label:"Last Name",placeholder:"Last Name",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"fatherName",label:"Father's Name/Husband Name",placeholder:"Father's Name",class:"form-control",validators:[{isRequired:!0}]},{type:"dropdown",id:"gender",label:"Gender",options:[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}],class:"form-control",validators:[{isRequired:!0}]},{type:"date",id:"dateOfBirth",label:"Date of Birth",placeholder:"dd/mm/yyyy",class:"form-control",validators:[{isRequired:!0}]},{type:"email",id:"email",label:"Email Address",placeholder:"Email Address",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"phoneNumber",label:"Mobile Number",placeholder:"10 Digit Mobile Number",class:"form-control",validators:[{isRequired:!0}]},{type:"dropdown",id:"planName",label:"Plan Name",options:[{value:"basic",label:"Basic"},{value:"premium",label:"Premium"}],class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"minBalance",label:"Min Balance",placeholder:"Min Balance",class:"form-control",validators:[{isRequired:!1}]},{heading:"KYC Details",type:"dropdown",id:"idType",label:"ID Type",options:[{value:"pan",label:"PAN"},{value:"aadhar",label:"Aadhar"}],class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"idNumber",label:"ID Detail",placeholder:"ID Detail",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"gstNumber",label:"GST Number",placeholder:"GST Number",class:"form-control",validators:[{isRequired:!1}]},{heading:"Address Details",type:"text",id:"address",label:"Address",placeholder:"Full Address",class:"form-control",validators:[{isRequired:!0}]},{type:"dropdown",id:"stateID",label:"State",options:[],class:"form-control",isRealTimeCalling:!0,validators:[{isRequired:!0}]},{type:"dropdown",id:"cityID",label:"District",options:[],class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"city",label:"City",placeholder:"City",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"pinCode",label:"Pincode",placeholder:"Pincode",class:"form-control",validators:[{isRequired:!0}]},{heading:"Outlet Details",type:"text",id:"outletName",label:"Shop Name",placeholder:"Firm Name",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"outletAddress",label:"Shop Address",placeholder:"Firm Address",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"outletPincode",label:"Outlet Pincode",placeholder:"Outlet Pincode",class:"form-control",validators:[{isRequired:!0}]},{heading:"User Login Details",type:"text",id:"username",label:"User Name",placeholder:"User Name",class:"form-control",validators:[{isRequired:!0}]},{type:"password",id:"password",label:"Password",placeholder:"Password",class:"form-control",validators:[{isRequired:!0}]},{heading:"AEPS/Parent Detail",type:"text",id:"marchantID",label:"Marchant ID",placeholder:"Marchant ID",class:"form-control",validators:[{isRequired:!1}]},{type:"text",id:"parentUserID",label:"Parent ID",placeholder:"Parent ID",class:"form-control",validators:[{isRequired:!0}]},{heading:"Service Access",type:"multiselect",id:"services",label:"Select Services",options:[{value:"mobileRecharge",label:"Mobile Recharge"},{value:"moneyTransfer",label:"Money Transfer"},{value:"merchantEKYC",label:"Merchant eKYC"},{value:"upiCollection",label:"UPI Collection"},{value:"aadharCorrection",label:"Aadhaar Correction"},{value:"dthRecharge",label:"DTH Recharge"},{value:"moveToBank",label:"Move To Bank"},{value:"microATM",label:"Micro ATM"},{value:"finoCMS",label:"Fino CMS"},{value:"eDistrict",label:"E-District"},{value:"billPayment",label:"Bill Payment"},{value:"fundRequest",label:"Fund Request"},{value:"fundTransfer",label:"Fund Transfer"},{value:"licBillPayment",label:"LIC Bill Payment"},{value:"aeps",label:"AEPS"},{value:"aadharPay",label:"Aadhar Pay"},{value:"fastTag",label:"FastTag"},{value:"nsdlPanCard",label:"NSDL Pan Card"}],class:"form-check-input",validators:[{isRequired:!0}]}],isFromPopUP:!0,actions:[{name:"Save",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}],formHeight:600},this.getState(),this.getUserDetails()}openDialog(e){let t=this.dialog.open(I,{data:{form:this.formConfig,formValue:e?e.value:"",columns:3,formName:e?"EDIT USER":"ADD USER"}});t.componentInstance.stateIDEmitter.subscribe(i=>{i.stateId&&this.getDistrict(i.stateId)}),t.afterClosed().subscribe(i=>{i.stateID&&this.submitForm(i)})}getUserDetails(){let e=JSON.parse(sessionStorage.getItem("userDetails")).tenantId;this.apiService.getUserDetails(e).subscribe({next:t=>{this.userDetails=t},error:t=>{this.messageNotificationService.error("Unable to Find User List","error"),console.error("Error fetching data:",t)}})}getState(){this.apiService.getState().subscribe({next:e=>{e=[{value:"",label:"-- Choose State --"},...e],this.formConfig.fields[14].options=e},error:e=>{this.messageNotificationService.error("Unable to Find State List","error"),console.error("Error fetching data:",e)}})}getDistrict(e){this.apiService.getDistrict(e).subscribe({next:t=>{t=[{value:"",label:"-- Choose District --"},...t],this.formConfig.fields[15].options=t},error:t=>{this.messageNotificationService.error("Unable to Find District List","error"),console.error("Error fetching data:",t)}})}submitForm(e){e.createdBy=JSON.parse(sessionStorage.getItem("userDetails")).name,this.apiService.AddUpdateUser(e).subscribe({next:t=>{t[0].status?this.messageNotificationService.success(t.message,"success",5e3):this.messageNotificationService.error(t.message,"error",5e3)},error:t=>{this.messageNotificationService.error("Unable to Submit User Data","error"),console.error("Error fetching data:",t)}})}editUserDetails(e){this.getUserDetailsByID(e.value.userKey)}getUserDetailsByID(e){let t=JSON.parse(sessionStorage.getItem("userDetails")).tenantId;this.apiService.getUserDetailsByID(t,e).subscribe({next:a=>{this.getDistrict(a.cityID),this.openDialog({value:a})},error:a=>{this.messageNotificationService.error("Unable to Find User Data","error"),console.error("Error fetching data:",a)}})}static{this.\u0275fac=function(t){return new(t||r)(l(N),l(C),l(D),l(S))}}static{this.\u0275cmp=c({type:r,selectors:[["app-user"]],standalone:!0,features:[y],decls:2,vars:4,consts:[[3,"formConfig","formName","columnCount"],[3,"tableDataSet","tableConfig","tableWidth","formName"],[3,"action","buttonAction","tableDataSet","tableConfig","tableWidth","formName"]],template:function(t,a){t&1&&(h(0,"app-dynamic-form",0),u(1,A,1,4,"app-data-grid",1)),t&2&&(d("formConfig",a.searchFormConfig)("formName","Search")("columnCount",3),m(),p(1,a.userDetails.length>0?1:-1))},dependencies:[R,U]})}}return r})();export{B as UserComponent};
