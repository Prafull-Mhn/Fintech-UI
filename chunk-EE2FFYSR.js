import{b as U}from"./chunk-RFCQFOQF.js";import"./chunk-WZR7FGU4.js";import"./chunk-2HWEYSZF.js";import{a as D}from"./chunk-TTTGN722.js";import{c as b,i as N}from"./chunk-NJAA5WMU.js";import{H as T}from"./chunk-VUNI6NKD.js";import"./chunk-CARY4E7O.js";import"./chunk-WFQ5CS6Y.js";import{a as A}from"./chunk-SWM7WQST.js";import{Ab as l,Bb as n,Ca as m,Cb as v,Da as u,Gb as g,Jb as d,Lb as s,Nc as S,Ub as k,Wc as R,Xa as c,Ya as p,a as f,bc as B,dc as C,nb as P,pb as r,ta as h,vb as y}from"./chunk-NVK54OB3.js";var O=o=>({"ti-btn-primary":o});function _(o,M){if(o&1){let e=g();v(0,"app-dynamic-form",7),l(1,"app-data-grid",8),d("action",function(t){m(e);let a=s();return u(a.applyActionOn(t))}),n()}if(o&2){let e=s();r("formConfig",e.searchFormConfig)("formName","Search")("columnCount",3),c(),r("tableDataSet",e.bookingDetails)("tableConfig",e.tableConfig)("tableWidth",100)("formName","Booking Details")}}function x(o,M){if(o&1){let e=g();l(0,"app-dynamic-form",9),d("action",function(t){m(e);let a=s();return u(a.applyActionOn(t))})("searchOnRealTime",function(t){m(e);let a=s();return u(a.searchOnRealTime(t))}),n()}if(o&2){let e=s();r("formConfig",e.busSearchingFormConfig)("formName","Search")("columnCount",3)}}var H=(()=>{class o{generateUniqueReferenceID(){let e=Math.floor(Math.random()*1e6);return new Date().getTime()+e}applyActionOn(e){if(e){let i=this.getUserDetails();e=f(f({},i),e)}this.selectedTab==="Booking Details"?this.openDialog():this.getAvailableTrips(e)}searchOnRealTime(e){this.lastSearchedCity!==e.value&&(this.lastSearchedCity=e.value,this.getSourceCity(e.value))}getSourceCity(e){let i=this.getUserDetails();i.searchText=e,this.apiService.getSourceCity(i).subscribe({next:t=>{t.status&&this.busSearchingFormConfig.fields&&this.busSearchingFormConfig.fields.length>1&&(this.busSearchingFormConfig.fields[0].options=t.data.cities,this.busSearchingFormConfig.fields[1].options=t.data.cities)},error:t=>{this.messageNotificationService.error("Unable to Find Source/Destination List","error"),console.error("Error fetching data:",t)}})}getUserDetails(){let e=JSON.parse(sessionStorage.getItem("userDetails"));return{userId:e.userId?e.userId:1,tenantId:e.tenantId,refid:this.generateUniqueReferenceID().toString()}}constructor(e,i,t){this.dialog=e,this.apiService=i,this.messageNotificationService=t,this.selectedTab="Search Bus",this.formConfig={fields:[{type:"text",id:"BookingOfficerFirstName",label:"First Name of Booking Officer",placeholder:"First",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"BookingOfficerLastName",label:"Last Name of Booking Officer",placeholder:"Last",class:"form-control",validators:[{isRequired:!0}]},{type:"number",id:"SeatCount",label:"Number of Seats",placeholder:"Number of Seats",class:"form-control",validators:[{isRequired:!0}]},{heading:"Pickup Date & Time",type:"date",id:"PickUpDate",label:"Date of Pick-Up",placeholder:"MM/DD/YYYY",class:"form-control",validators:[{isRequired:!0}]},{type:"time",id:"PickUpTime",label:"Time of Pick-Up",placeholder:"HH:MM AM",class:"form-control",validators:[{isRequired:!0}]},{heading:"Pickup Point",type:"text",id:"PickUpPointAddress1",label:"Street Address (Pick-Up Point)",placeholder:"Street Address",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"PickUpPointAddress2",label:"Street Address Line 2 (Pick-Up Point)",placeholder:"Street Address Line 2",class:"form-control",validators:[{isRequired:!1}]},{type:"text",id:"PickUpPointCity",label:"City (Pick-Up Point)",placeholder:"City",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"PickUpPointRegion",label:"Region (Pick-Up Point)",placeholder:"Region",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"PickUpPointPostalCode",label:"Postal / Zip Code (Pick-Up Point)",placeholder:"Postal / Zip Code",class:"form-control",validators:[{isRequired:!0}]},{type:"dropdown",id:"PickUpPointCountry",label:"Country (Pick-Up Point)",options:[{value:"India",label:"India"}],class:"form-control",validators:[{isRequired:!0}]},{heading:"Destination Details",type:"text",id:"DestinationAddress1",label:"Street Address",placeholder:"Street Address",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"DestinationAddress2",label:"Street Address Line 2",placeholder:"Street Address Line 2",class:"form-control",validators:[{isRequired:!1}]},{type:"text",id:"DestinationCity",label:"City",placeholder:"City",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"DestinationRegion",label:"Region",placeholder:"Region",class:"form-control",validators:[{isRequired:!0}]},{type:"text",id:"PostalCode",label:"Postal / Zip Code",placeholder:"Postal / Zip Code",class:"form-control",validators:[{isRequired:!0}]},{type:"dropdown",id:"Country",label:"Country",options:[{value:"India",label:"India"}],class:"form-control",validators:[{isRequired:!0}]},{heading:"Return Back",type:"date",id:"ReturnDate",label:"Date of Return",placeholder:"MM/DD/YYYY",class:"form-control",validators:[{isRequired:!1}]},{type:"time",id:"ReturnTime",label:"Time of Return Pick-up",placeholder:"HH:MM AM",class:"form-control",validators:[{isRequired:!1}]},{type:"text",id:"ActivityName",label:"Name of Activity",placeholder:"Name of Activity",class:"form-control",validators:[{isRequired:!1}]},{type:"textarea",id:"Comments",label:"Any Comments",placeholder:"Any Comments",class:"form-control",validators:[{isRequired:!1}]}],actions:[{name:"Submit",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}],isFromPopUP:!0,formHeight:600},this.bookingDetails=[{BookingOfficerFirstName:"Emily",BookingOfficerLastName:"Williams",PeopleCount:20,SeatCount:25,PickUpDate:"01/23/2025",PickUpTime:"11:30 AM",PickupAddress:"501 Maple Dr, Block C, City B, Region X, 123987, India",DestinationAddress:"403 Birch Ln, Building A, City C, Region Y, 321789, India",ReturnDate:"01/27/2025",ReturnTime:"06:00 PM",ActivityName:"Activity 3",Comments:"Sample comment 3"},{BookingOfficerFirstName:"John",BookingOfficerLastName:"Doe",PeopleCount:15,SeatCount:18,PickUpDate:"01/24/2025",PickUpTime:"02:00 PM",PickupAddress:"789 Oak St, Block A, City D, Region Z, 998877, India",DestinationAddress:"567 Pine Ave, Building B, City E, Region W, 554433, India",ReturnDate:"01/28/2025",ReturnTime:"05:00 PM",ActivityName:"Activity 1",Comments:"Sample comment 1"},{BookingOfficerFirstName:"Anna",BookingOfficerLastName:"Smith",PeopleCount:30,SeatCount:35,PickUpDate:"01/25/2025",PickUpTime:"09:00 AM",PickupAddress:"321 Elm St, Block B, City F, Region Y, 112233, India",DestinationAddress:"876 Cedar Rd, Building C, City G, Region X, 223344, India",ReturnDate:"01/29/2025",ReturnTime:"04:00 PM",ActivityName:"Activity 2",Comments:"Sample comment 2"},{BookingOfficerFirstName:"Michael",BookingOfficerLastName:"Johnson",PeopleCount:25,SeatCount:30,PickUpDate:"01/26/2025",PickUpTime:"10:15 AM",PickupAddress:"654 Birch St, Block C, City H, Region Z, 445566, India",DestinationAddress:"432 Pine Blvd, Building D, City I, Region W, 667788, India",ReturnDate:"01/30/2025",ReturnTime:"07:00 PM",ActivityName:"Activity 4",Comments:"Sample comment 4"},{BookingOfficerFirstName:"Sophia",BookingOfficerLastName:"Brown",PeopleCount:18,SeatCount:22,PickUpDate:"01/27/2025",PickUpTime:"03:30 PM",PickupAddress:"852 Maple Ave, Block D, City J, Region Y, 998899, India",DestinationAddress:"753 Cedar St, Building E, City K, Region X, 445577, India",ReturnDate:"02/01/2025",ReturnTime:"08:00 PM",ActivityName:"Activity 5",Comments:"Sample comment 5"},{BookingOfficerFirstName:"David",BookingOfficerLastName:"Williams",PeopleCount:22,SeatCount:28,PickUpDate:"01/28/2025",PickUpTime:"12:00 PM",PickupAddress:"123 Oak Dr, Block E, City L, Region Z, 998877, India",DestinationAddress:"555 Birch Ln, Building F, City M, Region W, 554433, India",ReturnDate:"02/02/2025",ReturnTime:"06:30 PM",ActivityName:"Activity 6",Comments:"Sample comment 6"},{BookingOfficerFirstName:"Isabella",BookingOfficerLastName:"Miller",PeopleCount:12,SeatCount:15,PickUpDate:"01/29/2025",PickUpTime:"04:00 PM",PickupAddress:"987 Pine Blvd, Block F, City N, Region X, 556677, India",DestinationAddress:"654 Maple Rd, Building G, City O, Region Y, 998877, India",ReturnDate:"02/03/2025",ReturnTime:"09:00 PM",ActivityName:"Activity 7",Comments:"Sample comment 7"},{BookingOfficerFirstName:"Liam",BookingOfficerLastName:"Taylor",PeopleCount:28,SeatCount:33,PickUpDate:"01/30/2025",PickUpTime:"01:30 PM",PickupAddress:"432 Cedar St, Block G, City P, Region Z, 112233, India",DestinationAddress:"876 Oak Ln, Building H, City Q, Region W, 223344, India",ReturnDate:"02/04/2025",ReturnTime:"05:30 PM",ActivityName:"Activity 8",Comments:"Sample comment 8"},{BookingOfficerFirstName:"Ava",BookingOfficerLastName:"Davis",PeopleCount:20,SeatCount:25,PickUpDate:"02/01/2025",PickUpTime:"10:30 AM",PickupAddress:"743 Elm Rd, Block H, City R, Region X, 445566, India",DestinationAddress:"111 Pine St, Building I, City S, Region Y, 667788, India",ReturnDate:"02/05/2025",ReturnTime:"07:00 PM",ActivityName:"Activity 9",Comments:"Sample comment 9"},{BookingOfficerFirstName:"James",BookingOfficerLastName:"Wilson",PeopleCount:35,SeatCount:40,PickUpDate:"02/02/2025",PickUpTime:"11:00 AM",PickupAddress:"432 Oak Blvd, Block I, City T, Region Z, 998899, India",DestinationAddress:"654 Maple Ln, Building J, City U, Region W, 112233, India",ReturnDate:"02/06/2025",ReturnTime:"06:30 PM",ActivityName:"Activity 10",Comments:"Sample comment 10"},{BookingOfficerFirstName:"Mason",BookingOfficerLastName:"Clark",PeopleCount:10,SeatCount:12,PickUpDate:"02/03/2025",PickUpTime:"03:00 PM",PickupAddress:"876 Cedar Rd, Block J, City V, Region X, 223344, India",DestinationAddress:"123 Oak Blvd, Building K, City W, Region Y, 998877, India",ReturnDate:"02/07/2025",ReturnTime:"08:00 PM",ActivityName:"Activity 11",Comments:"Sample comment 11"},{BookingOfficerFirstName:"Ethan",BookingOfficerLastName:"Lopez",PeopleCount:40,SeatCount:45,PickUpDate:"02/04/2025",PickUpTime:"02:30 PM",PickupAddress:"987 Oak Dr, Block K, City X, Region Z, 554433, India",DestinationAddress:"543 Pine Rd, Building L, City Y, Region W, 667788, India",ReturnDate:"02/08/2025",ReturnTime:"07:30 PM",ActivityName:"Activity 12",Comments:"Sample comment 12"},{BookingOfficerFirstName:"Charlotte",BookingOfficerLastName:"Martinez",PeopleCount:16,SeatCount:20,PickUpDate:"02/05/2025",PickUpTime:"01:00 PM",PickupAddress:"654 Elm Ave, Block L, City Z, Region Y, 223344, India",DestinationAddress:"432 Maple Blvd, Building M, City AA, Region X, 998877, India",ReturnDate:"02/09/2025",ReturnTime:"06:00 PM",ActivityName:"Activity 13",Comments:"Sample comment 13"},{BookingOfficerFirstName:"Alexander",BookingOfficerLastName:"Harris",PeopleCount:14,SeatCount:18,PickUpDate:"02/06/2025",PickUpTime:"12:30 PM",PickupAddress:"123 Pine Rd, Block M, City AB, Region W, 667788, India",DestinationAddress:"876 Cedar Blvd, Building N, City AC, Region Z, 998877, India",ReturnDate:"02/10/2025",ReturnTime:"05:00 PM",ActivityName:"Activity 14",Comments:"Sample comment 14"},{BookingOfficerFirstName:"Benjamin",BookingOfficerLastName:"Young",PeopleCount:27,SeatCount:32,PickUpDate:"02/07/2025",PickUpTime:"04:30 PM",PickupAddress:"543 Oak Ln, Block N, City AD, Region Y, 998899, India",DestinationAddress:"432 Maple Dr, Building O, City AE, Region Z, 112233, India",ReturnDate:"02/11/2025",ReturnTime:"08:30 PM",ActivityName:"Activity 15",Comments:"Sample comment 15"}],this.busConfig={tableHeading:"Booking Details",columns:[{name:"Booking Officer First Name",field:"BookingOfficerFirstName",width:"150"},{name:"Booking Officer Last Name",field:"BookingOfficerLastName",width:"150"},{name:"People Count",field:"PeopleCount",width:"100"},{name:"Seat Count",field:"SeatCount",width:"100"},{name:"Pick Up Date",field:"PickUpDate",width:"150"},{name:"Pick Up Time",field:"PickUpTime",width:"150"},{name:"Pick Up Address",field:"PickupAddress",width:"300"},{name:"Destination Address",field:"DestinationAddress",width:"300"},{name:"Return Date",field:"ReturnDate",width:"150"},{name:"Return Time",field:"ReturnTime",width:"150"},{name:"Activity Name",field:"ActivityName",width:"150"},{name:"Comments",field:"Comments",width:"250"}],headerOption:[{value:"add",name:"Book Seat",buttoncss:""}],config:{sorting:{column:"Name",order:"asc"},pageSizeOptions:[5,10,20],pageSize:5},isRowClickable:!1,isSearchable:!0},this.tableConfig={tableHeading:"Booking Details",columns:[{name:"Booking Officer First Name",field:"BookingOfficerFirstName",width:"150"},{name:"Booking Officer Last Name",field:"BookingOfficerLastName",width:"150"},{name:"People Count",field:"PeopleCount",width:"100"},{name:"Seat Count",field:"SeatCount",width:"100"},{name:"Pick Up Date",field:"PickUpDate",width:"150"},{name:"Pick Up Time",field:"PickUpTime",width:"150"},{name:"Pick Up Address",field:"PickupAddress",width:"300"},{name:"Destination Address",field:"DestinationAddress",width:"300"},{name:"Return Date",field:"ReturnDate",width:"150"},{name:"Return Time",field:"ReturnTime",width:"150"},{name:"Activity Name",field:"ActivityName",width:"150"},{name:"Comments",field:"Comments",width:"250"}],config:{sorting:{column:"Name",order:"asc"},pageSizeOptions:[5,10,20],pageSize:5},isRowClickable:!1,isSearchable:!0},this.searchFormConfig={fields:[{type:"dateTime",id:"ParentUser",label:"Pickup Date",placeholder:"All",class:"form-control",validators:[{isRequired:!1}]},{type:"dateTime",id:"ParentUser",label:"Return Date",placeholder:"All",class:"form-control",validators:[{isRequired:!1}]}],actions:[{name:"Save",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}]},this.busSearchingFormConfig={fields:[{type:"autoComplete",id:"source_id",label:"Pickup Location",placeholder:"Type a location",class:"form-control",options:[""],validators:[{isRequired:!0}],isRealTimeChanges:!0},{type:"autoComplete",id:"destination_id",label:"Drop Location",placeholder:"Type a location",class:"form-control",options:[""],validators:[{isRequired:!0}],isRealTimeChanges:!0},{type:"dateTime",id:"date_of_journey",label:"Journey Date",placeholder:"Select a date",class:"form-control",validators:[{isRequired:!0}]}],actions:[{name:"Save",css:"btn-primary"},{name:"Cancel",css:"btn-secondary"}]},this.lastSearchedCity=""}ngOnInit(){}openDialog(){this.dialog.open(U,{data:{form:this.formConfig,columns:3,formName:"Reserve Your Seat"}}).afterClosed().subscribe(i=>{console.log(`Dialog result: ${i}`)})}getAvailableTrips(e){this.apiService.getAvailableTrips(e).subscribe({next:i=>{i.status?this.messageNotificationService.success(i.message,"success",5e3):this.messageNotificationService.error(i.message,"error",5e3)},error:i=>{this.messageNotificationService.error("Unable to Find Trip Details","error"),console.error("Error fetching data:",i)}})}GetCurrentTripDetails(){this.apiService.GetCurrentTripDetails({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to Find Trip Details","error"),console.error("Error fetching data:",e)}})}BlockBusTicket(){this.apiService.BlockBusTicket({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to block seat","error"),console.error("Error fetching data:",e)}})}BookBusTicket(){this.apiService.BookBusTicket({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to book bus ticket","error"),console.error("Error fetching data:",e)}})}GetBookedTickets(){this.apiService.GetBookedTickets({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to get booked ticket","error"),console.error("Error fetching data:",e)}})}CheckBookedTickets(){this.apiService.CheckBookedTickets({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to check booked ticket","error"),console.error("Error fetching data:",e)}})}GetCancelationData(){this.apiService.GetCancelationData({}).subscribe({next:e=>{e.status?this.messageNotificationService.success(e.message,"success",5e3):this.messageNotificationService.error(e.message,"error",5e3)},error:e=>{this.messageNotificationService.error("Unable to Cancel Trip","error"),console.error("Error fetching data:",e)}})}static{this.\u0275fac=function(i){return new(i||o)(p(b),p(D),p(A))}}static{this.\u0275cmp=h({type:o,selectors:[["app-bus-booking"]],standalone:!0,features:[B],decls:12,vars:7,consts:[[1,"grid","grid-cols-12","gap-6"],[1,"xl:col-span-12","col-span-12"],[1,"box","box-body","!p-0"],[1,"md:flex","px-4","py-6","items-center","justify-between"],[1,"mt-2","md:mt-0"],[1,"-mb-0.5","sm:flex","sm:space-x-6","rtl:space-x-reverse","flex-wrap"],[1,"w-full","flex","sm:w-auto","hs-tab-active:font-semibold","hs-tab-active:text-primary","hs-tab-active:bg-primary/10","rounded-md","py-2","px-3","text-sm","cursor-pointer",3,"click","ngClass"],[3,"formConfig","formName","columnCount"],[3,"action","tableDataSet","tableConfig","tableWidth","formName"],[3,"action","searchOnRealTime","formConfig","formName","columnCount"]],template:function(i,t){i&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"nav",5)(6,"a",6),d("click",function(){return t.selectedTab="Booking Details"}),k(7," Booking Details "),n(),l(8,"a",6),d("click",function(){return t.selectedTab="Search Bus"}),k(9," Search Bus "),n()()()()(),P(10,_,2,7)(11,x,1,3),n()()),i&2&&(c(6),r("ngClass",C(3,O,t.selectedTab==="Booking Details")),c(2),r("ngClass",C(5,O,t.selectedTab==="Search Bus")),c(2),y(10,t.selectedTab==="Booking Details"?10:11))},dependencies:[N,T,R,S],styles:["@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.group[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out}"]})}}return o})();export{H as BusBookingComponent};
